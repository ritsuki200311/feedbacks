<%= form_with(model: @supporter_profile, url: supporter_profile_path(@supporter_profile), local: true, class: "space-y-8 bg-white p-8 rounded-lg shadow-md") do |f| %>
  <% if @supporter_profile.errors.any? %>
    <div class="bg-red-100 text-red-700 p-4 rounded mb-6">
      <p class="font-bold">入力エラーがあります：</p>
      <ul class="list-disc pl-5">
        <% @supporter_profile.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <label class="block text-lg font-semibold text-gray-800 mb-3">生年月日を入力してください</label>
    <div class="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
      <%= f.select(
          "birth_date(1i)",
          (Date.today.year.downto(1920)).to_a,
          { prompt: '年' },
          { class: "flex-1 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" }
      ) %>
      <%= f.select(
          "birth_date(2i)",
          (1..12).to_a,
          { prompt: '月' },
          { class: "flex-1 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" }
      ) %>
      <%= f.select(
          "birth_date(3i)",
          (1..31).to_a,
          { prompt: '日' },
          { class: "flex-1 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" }
      ) %>
    </div>
  </div>

  <%# 質問項目をセクションごとにまとめる %>
  <% sections = [
    { title: "実際に創作をしていますか（またはしていましたか？）", field: "support_genres", options: ['イラスト・絵画', 'マンガ・コミック', '小説・詩・エッセイ', '音楽制作・作詞作曲', '映像制作・動画編集', 'ゲーム制作・プログラミング', 'デザイン・グラフィック', '写真・撮影技術', '舞台・演劇・パフォーマンス', '手芸・クラフト', 'その他', 'していない'] }
  ] %>

  <%# チェックボックスセクションの描画 %>
  <% sections.each do |section| %>
    <div>
      <label class="block text-lg font-semibold text-gray-800 mb-3"><%= section[:title] %></label>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        <% section[:options].each do |option| %>
          <label class="flex items-center p-3 rounded-lg border cursor-pointer transition-colors hover:bg-gray-50">
            <%= check_box_tag "supporter_profile[#{section[:field]}][]", option, @supporter_profile.send("#{section[:field]}").include?(option), class: "h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" %>
            <span class="ml-3 text-gray-700"><%= option %></span>
          </label>
        <% end %>
      </div>
    </div>
  <% end %>

  <div>
    <label class="block text-lg font-semibold text-gray-800 mb-3">創作年数を教えてください</label>
    <%= f.select :creation_experience, ['1年未満', '1-3年', '4-6年', '7-10年', '10年以上', '経験なし'], { prompt: "選択してください" }, class: "w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" %>
  </div>

  <%# 好きなジャンルの質問 %>
  <div>
    <label class="block text-lg font-semibold text-gray-800 mb-3">好きなジャンルはありますか？</label>
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
      <% ['イラスト・絵画', 'マンガ・コミック', '小説・詩・エッセイ', '音楽制作・作詞作曲', '映像制作・動画編集', 'ゲーム制作・プログラミング', 'デザイン・グラフィック', '写真・撮影技術', '舞台・演劇・パフォーマンス', '手芸・クラフト', 'その他'].each do |option| %>
        <label class="flex items-center p-3 rounded-lg border cursor-pointer transition-colors hover:bg-gray-50">
          <%= check_box_tag "supporter_profile[interests][]", option, @supporter_profile.interests.include?(option), class: "h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" %>
          <span class="ml-3 text-gray-700"><%= option %></span>
        </label>
      <% end %>
    </div>
  </div>

  <%# SelectとTextAreaのセクション %>
  <div>
    <label class="block text-lg font-semibold text-gray-800 mb-3">好きなアーティストはいますか？</label>
    <p class="text-sm text-gray-600 mb-3">好きなクリエイターやアーティストを教えてください（スキップ可能）</p>
    <%= f.text_area :favorite_artists, rows: 4, class: "w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500", placeholder: "例：米津玄師、新海誠、村上春樹、Banksy、草間彌生など...好きなアーティストやクリエイターの名前を自由に書いてください" %>
  </div>

  <div>
    <label class="block text-lg font-semibold text-gray-800 mb-3">フィードバックできそうなことを教えてください</label>
    <p class="text-sm text-gray-600 mb-3">※ここに書いた内容に関するコメント依頼が届く可能性があります（回答しない場合はスキップ可能）</p>
    <%= f.text_area :can_feedback, rows: 4, class: "w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500", placeholder: "例：デジタルイラストのレイヤー構成、小説の三人称視点の書き方、DTMでのミックス技法、動画編集のカット割り、写真の構図理論など...具体的なスキルや知識を教えてください" %>
  </div>

  <!-- 保存ボタン -->
  <div class="pt-6 text-center">
    <%= f.submit "プロフィールを保存する", class: "w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-bold text-lg shadow-md transition-transform transform hover:scale-105" %>
  </div>
<% end %>