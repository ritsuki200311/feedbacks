<%= form_with(model: community, local: true, class: "space-y-6") do |form| %>
  <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
  <% if community.errors.any? %>
    <div class="bg-red-50 border-l-4 border-red-500 rounded-lg p-4">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-semibold text-red-800 mb-2">
            <%= pluralize(community.errors.count, "å€‹ã®ã‚¨ãƒ©ãƒ¼") %>ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ
          </h3>
          <ul class="list-disc list-inside text-sm text-red-700 space-y-1">
            <% community.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

  <!-- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å -->
  <div class="form-group">
    <%= form.label :name, class: "block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2" do %>
      <span class="text-xl">ğŸ“</span>
      <span>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å</span>
      <span class="text-red-500">*</span>
    <% end %>
    <%= form.text_field :name,
        class: "w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-lg",
        placeholder: "ä¾‹: ã‚¤ãƒ©ã‚¹ãƒˆæ„›å¥½ä¼šã€å‰µä½œå°èª¬ã‚µãƒ¼ã‚¯ãƒ«" %>
    <p class="mt-1 text-xs text-gray-500">è¦šãˆã‚„ã™ãã€åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ã‚’ã¤ã‘ã¾ã—ã‚‡ã†</p>
  </div>

  <!-- èª¬æ˜ -->
  <div class="form-group">
    <%= form.label :description, class: "block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2" do %>
      <span class="text-xl">âœï¸</span>
      <span>ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®èª¬æ˜</span>
    <% end %>
    <%= form.text_area :description,
        rows: 5,
        class: "w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",
        placeholder: "ã“ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç›®çš„ã‚„ã€ã©ã‚“ãªäººã«å‚åŠ ã—ã¦ã»ã—ã„ã‹ã‚’æ›¸ã„ã¦ãã ã•ã„..." %>
    <p class="mt-1 text-xs text-gray-500">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®é­…åŠ›ã‚’ä¼ãˆã¾ã—ã‚‡ã†</p>
  </div>

  <!-- å…¬é–‹è¨­å®š -->
  <div class="form-group">
    <div class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3">
      <span class="text-xl">ğŸŒ</span>
      <span>å…¬é–‹è¨­å®š</span>
      <span class="text-red-500">*</span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- å…¬é–‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
      <label class="relative cursor-pointer" data-option="public">
        <%= form.radio_button :is_public, true,
            id: "community_is_public_true",
            class: "sr-only",
            checked: true %>
        <div class="option-card border-2 border-blue-500 bg-blue-50 rounded-xl p-5 transition-all hover:border-blue-400">
          <div class="flex items-start gap-3">
            <div class="option-icon flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
              <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-gray-800 mb-1">ğŸŒ å…¬é–‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</h3>
              <p class="text-sm text-gray-600">èª°ã§ã‚‚è‡ªç”±ã«å‚åŠ ã§ãã¾ã™ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
            </div>
          </div>
          <!-- ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ -->
          <div class="option-check absolute top-3 right-3">
            <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>
        </div>
      </label>

      <!-- éå…¬é–‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
      <label class="relative cursor-pointer" data-option="private">
        <%= form.radio_button :is_public, false,
            id: "community_is_public_false",
            class: "sr-only" %>
        <div class="option-card border-2 border-gray-300 bg-white rounded-xl p-5 transition-all hover:border-purple-300">
          <div class="flex items-start gap-3">
            <div class="option-icon flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
              <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-gray-800 mb-1">ğŸ”’ éå…¬é–‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</h3>
              <p class="text-sm text-gray-600">æ‹›å¾…ã•ã‚ŒãŸäººã®ã¿å‚åŠ ã§ãã¾ã™ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸€è¦§ã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>
            </div>
          </div>
          <!-- ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ -->
          <div class="option-check absolute top-3 right-3 hidden">
            <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center">
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>
        </div>
      </label>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const publicRadio = document.getElementById('community_is_public_true');
      const privateRadio = document.getElementById('community_is_public_false');
      const publicLabel = document.querySelector('[data-option="public"]');
      const privateLabel = document.querySelector('[data-option="private"]');

      function updateStyles() {
        if (publicRadio.checked) {
          // å…¬é–‹ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹å ´åˆ
          publicLabel.querySelector('.option-card').className = 'option-card border-2 border-blue-500 bg-blue-50 rounded-xl p-5 transition-all hover:border-blue-400';
          publicLabel.querySelector('.option-icon').className = 'option-icon flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center';
          publicLabel.querySelector('.option-icon svg').className = 'w-5 h-5 text-white';
          publicLabel.querySelector('.option-check').classList.remove('hidden');

          privateLabel.querySelector('.option-card').className = 'option-card border-2 border-gray-300 bg-white rounded-xl p-5 transition-all hover:border-purple-300';
          privateLabel.querySelector('.option-icon').className = 'option-icon flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center';
          privateLabel.querySelector('.option-icon svg').className = 'w-5 h-5 text-purple-600';
          privateLabel.querySelector('.option-check').classList.add('hidden');
        } else {
          // éå…¬é–‹ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹å ´åˆ
          publicLabel.querySelector('.option-card').className = 'option-card border-2 border-gray-300 bg-white rounded-xl p-5 transition-all hover:border-blue-300';
          publicLabel.querySelector('.option-icon').className = 'option-icon flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center';
          publicLabel.querySelector('.option-icon svg').className = 'w-5 h-5 text-blue-600';
          publicLabel.querySelector('.option-check').classList.add('hidden');

          privateLabel.querySelector('.option-card').className = 'option-card border-2 border-purple-500 bg-purple-50 rounded-xl p-5 transition-all hover:border-purple-400';
          privateLabel.querySelector('.option-icon').className = 'option-icon flex-shrink-0 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center';
          privateLabel.querySelector('.option-icon svg').className = 'w-5 h-5 text-white';
          privateLabel.querySelector('.option-check').classList.remove('hidden');
        }
      }

      publicRadio.addEventListener('change', updateStyles);
      privateRadio.addEventListener('change', updateStyles);
      updateStyles(); // åˆæœŸçŠ¶æ…‹ã‚’è¨­å®š
    });
  </script>

  <!-- ã‚¿ã‚° -->
  <div class="form-group">
    <%= form.label :tags, class: "block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2" do %>
      <span class="text-xl">ğŸ·ï¸</span>
      <span>ã‚¿ã‚°</span>
    <% end %>
    <%= form.text_field :tags,
        class: "w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",
        placeholder: "ã‚¤ãƒ©ã‚¹ãƒˆ, å‰µä½œ, åˆå¿ƒè€…æ­“è¿" %>
    <p class="mt-1 text-xs text-gray-500">ã‚«ãƒ³ãƒï¼ˆ,ï¼‰åŒºåˆ‡ã‚Šã§è¤‡æ•°ã®ã‚¿ã‚°ã‚’è¨­å®šã§ãã¾ã™</p>

    <!-- ã‚¿ã‚°ã®ä¾‹ -->
    <div class="mt-3 flex flex-wrap gap-2">
      <span class="text-xs text-gray-500">ä¾‹:</span>
      <span class="bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full">ã‚¤ãƒ©ã‚¹ãƒˆ</span>
      <span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full">å‰µä½œ</span>
      <span class="bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full">åˆå¿ƒè€…æ­“è¿</span>
      <span class="bg-orange-100 text-orange-700 text-xs px-2 py-1 rounded-full">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</span>
    </div>
  </div>

  <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
  <div class="pt-6 border-t border-gray-200">
    <%= form.submit "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ä½œæˆ",
        class: "w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 text-lg flex items-center justify-center gap-2 cursor-pointer" %>
  </div>
<% end %>
