<div id="header" class="bg-gray-800 text-white p-4 text-center text-lg rounded-b-lg">
    あなたの好みを教えてください
</div>

<div id="matter-container-wrapper" class="flex-grow flex justify-center items-center p-4 relative overflow-hidden">
    <div id="matter-container" class="w-full max-w-3xl h-[70%] bg-white rounded-lg shadow-lg overflow-hidden"></div>
    <div id="reset-button-container" class="absolute top-2 right-2">
        <button id="reset-button" class="bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-600 transition">
            最初から
        </button>
    </div>
</div>

<div id="selected-items-bar" class="bg-gray-700 text-white p-3 text-center rounded-t-lg shadow-md max-h-32 overflow-y-auto">
    <h3 class="text-sm font-medium mb-2">選択中の好み:</h3>
    <div id="selected-items-display"></div>
</div>

<% if @preference.persisted? %>
  <%= form_with model: @preference, url: preference_path(@preference), method: :patch, local: true, data: { turbo: false } do |f| %>
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= f.hidden_field :genre, id: "genre_field" %>
    <%= f.hidden_field :instrument_experience, id: "instrument_field" %>
    <%= f.hidden_field :favorite_artist, id: "artist_field" %>
    <%= f.hidden_field :career, id: "career_field" %>
    <%= f.hidden_field :selected_items, id: "selected_items_field" %>
    <%= f.submit "好みを送信して次へ", class: "mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" %>
  <% end %>
<% else %>
  <%= form_with model: @preference, url: preference_path, method: :post, local: true, data: { turbo: false } do |f| %>
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= f.hidden_field :genre, id: "genre_field" %>
    <%= f.hidden_field :instrument_experience, id: "instrument_field" %>
    <%= f.hidden_field :favorite_artist, id: "artist_field" %>
    <%= f.hidden_field :career, id: "career_field" %>
    <%= f.hidden_field :selected_items, id: "selected_items_field" %>
    <%= f.submit "好みを送信して次へ", class: "mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" %>
  <% end %>
<% end %>