<!-- ホームに戻るリンク -->
<%= link_to root_path, class: "inline-flex items-center gap-2 bg-blue-100 hover:bg-blue-200 text-blue-600 hover:text-gray-700 transition font-semibold px-4 py-2 rounded-lg shadow-md text-lg mb-6 mt-8" do %>
  <svg class="w-5 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 14 24">
    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19l-7-7 7-7" />
  </svg>
  ホームに戻る
<% end %>

<h1 class="text-2xl font-bold mt-6 mb-4">新規投稿</h1>

<% if @post.errors.any? %>
  <div class="error-messages">
    <h2><%= pluralize(@post.errors.count, "件のエラー") %>が発生しました：</h2>
    <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>

  <!-- タイトル -->
  <div>
    <%= form.label :title, "タイトル", class: "block text-gray-700 mb-1" %>
    <%= form.text_field :title, class: "w-full rounded border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 p-2" %>
  </div>

  <!-- 本文 -->
  <div>
    <%= form.label :body, "本文", class: "block text-gray-700 mb-1" %>
    <%= form.text_area :body, class: "w-full rounded border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 p-2 h-40" %>
  </div>

  <!-- タグを選んでください（複数選択可） -->
  <div class="mt-4">
    <p class="font-semibold mb-2">タグを選んでください（複数選択可）</p>
    <div id="tag-options" class="flex flex-wrap gap-2">
      <% ["批評ください", "優しい意見ください", "どう感じたのか", "厳しい意見お待ちしています"].each_with_index do |tag_option, index| %>
        <label for="tag_<%= index %>" class="tag-label inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
          <%= check_box_tag "post[tag_list][]", tag_option, @post.tag.to_s.include?(tag_option), id: "tag_#{index}", class: "hidden" %>
          <span><%= tag_option %></span>
        </label>
      <% end %>
    </div>
  </div>

<!-- 1. 送りたい人の立場 -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の立場</p>
  <div class="flex flex-wrap gap-2">
    <% ['学生', '社会人', 'フリーランス', 'アーティスト / クリエイター志望', 'その他'].each_with_index do |option, index| %>
      <label for="recipient_standing_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_standing][]", option, false, id: "recipient_standing_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 2. 創作歴 -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の創作歴</p>
  <div class="flex flex-wrap gap-2">
    <% ['自分も創作している', '未経験だが興味がある', '興味なし'].each_with_index do |option, index| %>
      <label for="recipient_creation_experience_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_creation_experience][]", option, false, id: "recipient_creation_experience_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 3. 趣味・関心ジャンル -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の趣味・関心ジャンル</p>
  <div class="flex flex-wrap gap-2">
    <% ['音楽', '映像・映画・アニメ', 'イラスト・漫画', 'ゲーム・実況', '小説・エッセイ', 'ファッション・アート', 'その他'].each_with_index do |option, index| %>
      <label for="recipient_interests_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_interests][]", option, false, id: "recipient_interests_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 4. 年齢層 -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の年齢層</p>
  <div class="flex flex-wrap gap-2">
    <% ['～15歳', '16～18歳', '19～22歳', '23～29歳', '30代', '40代以上'].each_with_index do |option, index| %>
      <label for="recipient_age_group_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_age_group][]", option, false, id: "recipient_age_group_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 5. 支援したいジャンル -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人が支援したいジャンル</p>
  <div class="flex flex-wrap gap-2">
    <% ['音楽', '映像・動画', 'イラスト・マンガ', '小説・文章', 'ゲーム・実況', 'ファッション・アート', '舞台・パフォーマンス', 'その他'].each_with_index do |option, index| %>
      <label for="recipient_support_genres_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_support_genres][]", option, false, id: "recipient_support_genres_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 6. 応援スタイル -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の応援スタイル</p>
  <div class="flex flex-wrap gap-2">
    <% ['金銭的支援をしたい', '感想コメントを書きたい', 'SNSで広めたい', 'コラボ・アドバイスしたい', '見守りたい', 'イベントに参加したい'].each_with_index do |option, index| %>
      <label for="recipient_support_styles_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_support_styles][]", option, false, id: "recipient_support_styles_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>

<!-- 7. 性格傾向 -->
<div class="mt-4">
  <p class="font-semibold mb-2">送りたい人の性格傾向</p>
  <div class="flex flex-wrap gap-2">
    <% ['熱く語りたいタイプ', '静かに応援したい', '質問したい・話しかけたい', '遠くからそっと見ていたい'].each_with_index do |option, index| %>
      <label for="recipient_personality_traits_<%= index %>"
             class="inline-block px-3 py-1 border rounded-full cursor-pointer bg-gray-200 hover:bg-gray-300 transition">
        <%= check_box_tag "post[recipient_personality_traits][]", option, false, id: "recipient_personality_traits_#{index}", class: "hidden" %>
        <span><%= option %></span>
      </label>
    <% end %>
  </div>
</div>


  <!-- 以下、支援者プロフィールセクション（立場〜性格傾向） -->
  <!-- ここは今のままでOKです、class構成は統一されています -->

  <!-- 送信ボタン -->
  <%= form.submit "投稿する", class: "btn-primary mt-6" %>
<% end %>

<!-- チェックボックス選択時のスタイル調整 -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('#tag-options input[type="checkbox"]').forEach(function (checkbox) {
      checkbox.addEventListener('change', function () {
        const label = this.closest('label');
        if (this.checked) {
          label.classList.add('bg-blue-400', 'text-white');
          label.classList.remove('bg-gray-200', 'hover:bg-gray-300');
        } else {
          label.classList.remove('bg-blue-400', 'text-white');
          label.classList.add('bg-gray-200', 'hover:bg-gray-300');
        }
      });

      if (checkbox.checked) {
        const label = checkbox.closest('label');
        label.classList.add('bg-blue-400', 'text-white');
        label.classList.remove('bg-gray-200', 'hover:bg-gray-300');
      }
    });
  });
</script>
